{"remainingRequest":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js!D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\Checkout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\Checkout.vue","mtime":1583915974193},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhlYWRlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0hlYWRlcic7CmltcG9ydCBGb290ZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Gb290ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2NoZWNrdW90JywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2FydDoge30sCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGZpbmFsVG90YWw6IDAsCiAgICAgIGNvdXBvbl9jb2RlOiAnJywKICAgICAgZm9ybTogewogICAgICAgIHVzZXI6IHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgZW1haWw6ICcnLAogICAgICAgICAgdGVsOiAnJywKICAgICAgICAgIGFkZHJlc3M6ICcnCiAgICAgICAgfSwKICAgICAgICBtZXNzYWdlOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgSGVhZGVyOiBIZWFkZXIsCiAgICBGb290ZXI6IEZvb3RlcgogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q2FydDogZnVuY3Rpb24gZ2V0Q2FydCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICIvYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEgsICIvY2FydCIpOwogICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB2bS4kaHR0cC5nZXQoYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZS5kYXRhLmRhdGEnLCByZXNwb25zZS5kYXRhLmRhdGEpOwogICAgICAgIHZtLmNhcnQgPSByZXNwb25zZS5kYXRhLmRhdGE7CiAgICAgICAgdm0uZmluYWxUb3RhbCA9IHJlc3BvbnNlLmRhdGEuZGF0YS5maW5hbF90b3RhbDsKICAgICAgfSk7CiAgICB9LAogICAgYWRkQ291cG9uQ29kZTogZnVuY3Rpb24gYWRkQ291cG9uQ29kZSgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICIvYXBpLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEgsICIvY291cG9uIik7CiAgICAgIHZhciBjb3Vwb24gPSB7CiAgICAgICAgY29kZTogdm0uY291cG9uX2NvZGUKICAgICAgfTsKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdm0uJGh0dHAucG9zdChhcGksIHsKICAgICAgICBkYXRhOiBjb3Vwb24KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgdm0uZ2V0Q2FydCgpOwogICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBjcmVhdGVPcmRlcjogZnVuY3Rpb24gY3JlYXRlT3JkZXIoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiL2FwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRILCAiL29yZGVyIik7CiAgICAgIHZhciBvcmRlciA9IHZtLmZvcm07CiAgICAgIHZtLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHZtLiR2YWxpZGF0b3IudmFsaWRhdGUoKS50aGVuKGZ1bmN0aW9uIChyZXN1bHQpIHsKICAgICAgICBpZiAocmVzdWx0KSB7CiAgICAgICAgICB2bS4kaHR0cC5wb3N0KGFwaSwgewogICAgICAgICAgICBkYXRhOiBvcmRlcgogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ+ioguWWruW3suW7uueriycsIHJlc3BvbnNlKTsKCiAgICAgICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgICAgICB2bS4kcm91dGVyLnB1c2goIi9jaGVja291dC8iLmNvbmNhdChyZXNwb25zZS5kYXRhLm9yZGVySWQpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ+ashOS9jeS4jeWujOaVtCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDYXJ0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["Checkout.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <loading :active.sync=\"isLoading\">\n      <img src=\"../../assets/images/load.gif\" alt=\"loading\">\n    </loading>\n    <!-- Start Header -->\n    <Header />\n    <!-- End Header -->\n\n    <!-- Start Content -->\n    <div class=\"container mt-4\">\n      <div class=\"row\">\n        <div class=\"col-md-10 offset-md-1\">\n          <div class=\"row\">\n            <div class=\"col-md-4 mb-2 mb-md-4\">\n              <div class=\"step active\">資料填寫</div>\n            </div>\n            <div class=\"col-md-4 mb-2 mb-md-4\">\n              <div class=\"step\">確認訂單</div>\n            </div>\n            <div class=\"col-md-4 mb-2 mb-md-4\">\n              <div class=\"step\">完成</div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col-md-6 offset-md-3\">\n          <div class=\"row mb-4\">\n            <div class=\"col-12\">\n              <div id=\"accordion\">\n                <div class=\"card\">\n                  <button\n                    class=\"card-header btn btn-link d-flex justify-content-between\"\n                    id=\"headingOne\"\n                    data-toggle=\"collapse\"\n                    data-target=\"#collapseOne\"\n                    aria-expanded=\"true\"\n                    aria-controls=\"collapseOne\"\n                  >\n                    <h5 class=\"mb-0\">購物車清單</h5>\n                    <div class=\"totalPrice\">{{ cart.final_total|currency }}</div>\n                  </button>\n                  <div\n                    id=\"collapseOne\"\n                    class=\"collapse\"\n                    aria-labelledby=\"headingOne\"\n                    data-parent=\"#accordion\"\n                  >\n                    <div class=\"card-body p-0\">\n                      <table class=\"table mb-0\">\n                        <thead>\n                          <tr>\n                            <th width=\"20%\"></th>\n                            <th class=\"text-left\">產品名稱</th>\n                            <th class=\"text-center\">單位</th>\n                            <th class=\"text-right\">價格</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr v-for=\"item in cart.carts\" :key=\"item.id\">\n                            <td>\n                              <img\n                                :src=\"`${item.product.imageUrl}`\"\n                                :alt=\"`${ item.product.title }`\"\n                                class=\"img img-fluid cartImg\"\n                              />\n                            </td>\n                            <td class=\"text-left\">\n                              {{ item.product.title }}\n                              <div class=\"text-success\" v-if=\"item.coupon\">\n                                已套用優惠券\n                              </div>\n                            </td>\n                            <td class=\"text-center\">{{ item.qty }}/{{ item.product.unit }}</td>\n                            <td class=\"text-right\">{{ item.final_total }}</td>\n                          </tr>\n                        </tbody>\n                        <tfoot>\n                          <tr>\n                            <td colspan=\"3\" class=\"text-right\">合計：</td>\n                            <td class=\"text-right\">{{ cart.total|currency }}</td>\n                          </tr>\n                          <tr v-if=\"cart.final_total !== cart.total\">\n                            <td colspan=\"3\" class=\"text-right text-success\">折扣價</td>\n                            <td class=\"text-right text-success\">{{ cart.final_total|currency }}</td>\n                          </tr>\n                        </tfoot>\n                      </table>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"input-group mt-4\">\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"輸入優惠代碼\"\n                    v-model=\"coupon_code\"\n                  />\n                  <div class=\"input-group-append\">\n                    <button class=\"btn btn-outline-secondary\" type=\"button\" @click=\"addCouponCode\">輸入優惠碼</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"row mb-4\">\n            <div class=\"col-12\">\n              <form @submit.prevent=\"createOrder\">\n                <div class=\"form-group\">\n                  <label for=\"email\">Email</label>\n                  <input\n                    type=\"email\"\n                    class=\"form-control\"\n                    name=\"email\"\n                    id=\"email\"\n                    v-model=\"form.user.email\"\n                    v-validate=\"'required|email'\"\n                    placeholder=\"請輸入 Email\"\n                  />\n                  <span class=\"text-danger\" v-if=\"errors.has('email')\">{{ errors.first('email') }}</span>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"userName\">收件人姓名</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    :class=\"{'is-invalid' : errors.has('name')}\"\n                    name=\"name\"\n                    id=\"userName\"\n                    v-model=\"form.user.name\"\n                    v-validate=\"'required'\"\n                    placeholder=\"請輸入姓名\"\n                  />\n                  <span class=\"text-danger\" v-if=\"errors.has('name')\">姓名必須輸入</span>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"userTel\">收件人電話</label>\n                  <input\n                    type=\"tel\"\n                    class=\"form-control\"\n                    :class=\"{'is-invalid' : errors.has('tel')}\"\n                    name=\"tel\"\n                    id=\"userTel\"\n                    v-model=\"form.user.tel\"\n                    v-validate=\"'required'\"\n                    placeholder=\"請輸入電話\"\n                  />\n                  <span class=\"text-danger\" v-if=\"errors.has('tel')\">電話必須輸入</span>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"userAdd\">收件人地址</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    :class=\"{'is-invalid' : errors.has('address')}\"\n                    name=\"address\"\n                    id=\"userAdd\"\n                    v-model=\"form.user.address\"\n                    v-validate=\"'required'\"\n                    placeholder=\"請輸入地址\"\n                  />\n                  <span class=\"text-danger\" v-if=\"errors.has('address')\">地址欄位不得留空</span>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"comment\">留言</label>\n                  <textarea class=\"form-control\" id=\"comment\" v-model=\"form.message\" rows=\"10\"></textarea>\n                </div>\n                <div class=\"text-center\">\n                  <router-link to=\"/products\" class=\"btn btn-secondary mr-4\">繼續購物</router-link>\n                  <button type=\"submit\" class=\"btn btn-primary\">送出訂單</button>\n                </div>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End Content -->\n\n    <!-- Start Footer -->\n    <Footer />\n    <!-- End Footer -->\n  </div>\n</template>\n\n<script>\nimport Header from '../../components/Header'\nimport Footer from '../../components/Footer'\n\nexport default {\n  name: 'checkuot',\n  data () {\n    return {\n      cart: {},\n      isLoading: false,\n      finalTotal: 0,\n      coupon_code: '',\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: ''\n        },\n        message: ''\n      }\n    }\n  },\n  components: {\n    Header,\n    Footer\n  },\n  methods: {\n    getCart () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n      vm.isLoading = true\n      vm.$http.get(api).then(response => {\n        vm.isLoading = false\n        console.log('response.data.data', response.data.data)\n        vm.cart = response.data.data\n        vm.finalTotal = response.data.data.final_total\n      })\n    },\n    addCouponCode () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/coupon`\n      const coupon = {\n        code: vm.coupon_code\n      }\n      vm.isLoading = true\n      vm.$http.post(api, { data: coupon }).then(response => {\n        console.log(response)\n        vm.getCart()\n        vm.isLoading = false\n      })\n    },\n    createOrder () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order`\n      const order = vm.form\n      vm.isLoading = true\n      vm.$validator.validate().then(result => {\n        if (result) {\n          vm.$http.post(api, { data: order }).then(response => {\n            console.log('訂單已建立', response)\n            if (response.data.success) {\n              vm.$router.push(`/checkout/${response.data.orderId}`)\n            }\n            vm.isLoading = false\n          })\n        } else {\n          console.log('欄位不完整')\n        }\n      })\n    }\n  },\n  created () {\n    this.getCart()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/all.scss\";\n\n.container {\n  padding-top: 9vh;\n}\n\n.step {\n  width: 100%;\n  padding: 10px 0;\n  font-size: 16px;\n  line-height: 20px;\n  text-align: center;\n  color: $primary;\n  border: 1px solid $primary;\n  border-radius: 20px;\n  &.active {\n    background-color: $primary;\n    color: white;\n  }\n}\n#accordion {\n  width: 100%;\n  .btn-link,\n  .btn-link:hover {\n    text-decoration: none;\n  }\n  .totalPrice {\n    font-weight: bold;\n  }\n}\ntextarea {\n  resize: none;\n}\n</style>\n"],"sourceRoot":"src/views/frontEnd"}]}