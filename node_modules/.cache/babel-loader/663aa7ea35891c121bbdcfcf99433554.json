{"remainingRequest":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js!D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作品集\\Vue_MySweetLover\\src\\views\\backEnd\\Coupons.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\作品集\\Vue_MySweetLover\\src\\views\\backEnd\\Coupons.vue","mtime":1583938794557},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnLi4vLi4vY29tcG9uZW50cy9QYWdpbmF0aW9uJzsKaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjb3Vwb25zJywKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY291cG9uczogW10sCiAgICAgIHBhZ2luYXRpb246IHt9LAogICAgICB0ZW1wQ291cG9uOiB7CiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGlzX2VuYWJsZWQ6IDAsCiAgICAgICAgcGVyY2VudDogMTAwLAogICAgICAgIGR1ZV9kYXRlOiAwLAogICAgICAgIGNvZGU6ICcnCiAgICAgIH0sCiAgICAgIGlzTmV3OiBmYWxzZSwKICAgICAgZHVlX2RhdGU6IG5ldyBEYXRlKCksCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHN0YXR1czogewogICAgICAgIGxvYWRpbmdJdGVtOiAnJwogICAgICB9CiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIGR1ZV9kYXRlOiBmdW5jdGlvbiBkdWVfZGF0ZSgpIHsKICAgICAgdmFyIHZtID0gdGhpczsgLy8g5L2/55SoIG5ldyBEYXRlKHZtLmR1ZV9kYXRlKSAvIDEwMDAg5bCH5pel5pyf6L2J5o+b5oiQ5q+r56eSCiAgICAgIC8vIOS9v+eUqCBNYXRoLmZsb29yKCkg5bCH5q+r56eS5Zub5o2o5LqU5YWl5Y+W5pW05pW4CgogICAgICB2YXIgdGltZXN0YW1wID0gTWF0aC5mbG9vcihuZXcgRGF0ZSh2bS5kdWVfZGF0ZSkgLyAxMDAwKTsKICAgICAgdm0udGVtcENvdXBvbi5kdWVfZGF0ZSA9IHRpbWVzdGFtcDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvdXBvbnM6IGZ1bmN0aW9uIGdldENvdXBvbnMoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiL2FwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRILCAiL2FkbWluL2NvdXBvbnMiKTsKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdm0uJGh0dHAuZ2V0KGFwaSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgICB2bS5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgICB2bS5jb3Vwb25zID0gcmVzcG9uc2UuZGF0YS5jb3Vwb25zOwogICAgICB9KTsKICAgIH0sCiAgICBvcGVuQ291cG9uTW9kYWw6IGZ1bmN0aW9uIG9wZW5Db3Vwb25Nb2RhbChpc05ldywgaXRlbSkgewogICAgICB2YXIgdm0gPSB0aGlzOwoKICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgdm0uaXNOZXcgPSB0cnVlOwogICAgICAgIHZtLnRlbXBDb3Vwb24gPSB7fTsKICAgICAgICAkKCcuY291cG9uVGl0bGUnKS50ZXh0KCfmlrDlop7lhKrmg6DliLgnKTsKICAgICAgICAkKCcuYWRkQ291cG9uJykudGV4dCgn56K66KqN5paw5aKe5YSq5oOg5Yi4Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdm0uaXNOZXcgPSBmYWxzZTsKICAgICAgICB2bS50ZW1wQ291cG9uID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7CiAgICAgICAgJCgnLmNvdXBvblRpdGxlJykudGV4dCgn57eo6Lyv5YSq5oOg5Yi4Jyk7CiAgICAgICAgJCgnLmFkZENvdXBvbicpLnRleHQoJ+abtOaWsOWEquaDoOWIuCcpOwogICAgICB9CgogICAgICAkKCcjY291cG9uTW9kYWwnKS5tb2RhbCgnc2hvdycpOwogICAgfSwKICAgIHVwZGF0ZUNvdXBvbjogZnVuY3Rpb24gdXBkYXRlQ291cG9uKCkgewogICAgICB2YXIgdm0gPSB0aGlzOwogICAgICB2YXIgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi9hcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSCwgIi9hZG1pbi9jb3Vwb24iKTsKICAgICAgdmFyIGh0dHBNZXRob2QgPSAncG9zdCc7CgogICAgICBpZiAoIXZtLmlzTmV3KSB7CiAgICAgICAgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi9hcGkvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSCwgIi9hZG1pbi9jb3Vwb24vIikuY29uY2F0KHZtLnRlbXBDb3Vwb24uaWQpOwogICAgICAgIGh0dHBNZXRob2QgPSAncHV0JzsKICAgICAgfQoKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdm0uJGh0dHBbaHR0cE1ldGhvZF0oYXBpLCB7CiAgICAgICAgZGF0YTogdm0udGVtcENvdXBvbgogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEpOwogICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgICQoJyNjb3Vwb25Nb2RhbCcpLm1vZGFsKCdoaWRlJyk7CiAgICAgICAgdm0uZ2V0Q291cG9ucygpOwogICAgICB9KTsKICAgIH0sCiAgICBvcGVuRGVsTW9kYWw6IGZ1bmN0aW9uIG9wZW5EZWxNb2RhbChpdGVtKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZtLnRlbXBDb3Vwb24gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTsKICAgICAgJCgnLmRlbE1vZGFsVGl0bGUnKS50ZXh0KCJcdTUyMkFcdTk2NjRcdTUxMkFcdTYwRTBcdTUyMzhcdUZGMUEiLmNvbmNhdCh2bS50ZW1wQ291cG9uLnRpdGxlKSk7CiAgICAgICQoJyNkZWxDb3Vwb25Nb2RhbCcpLm1vZGFsKCdzaG93Jyk7CiAgICB9LAogICAgZGVsQ291cG9uOiBmdW5jdGlvbiBkZWxDb3Vwb24oKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiL2FwaS8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRILCAiL2FkbWluL2NvdXBvbi8iKS5jb25jYXQodm0udGVtcENvdXBvbi5pZCk7CiAgICAgIHZtLnN0YXR1cy5sb2FkaW5nSXRlbSA9IHZtLnRlbXBDb3Vwb24uaWQ7CiAgICAgIHZtLiRodHRwLmRlbGV0ZShhcGkpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgdm0uc3RhdHVzLmxvYWRpbmdJdGVtID0gJyc7CiAgICAgICAgJCgnI2RlbENvdXBvbk1vZGFsJykubW9kYWwoJ2hpZGUnKTsKICAgICAgICB2bS5nZXRDb3Vwb25zKCk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0Q291cG9ucygpOwogIH0KfTs="},{"version":3,"sources":["Coupons.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div class=\"products\">\n    <loading :active.sync=\"isLoading\">\n      <img src=\"../../assets/images/load.gif\" alt=\"loading\">\n    </loading>\n\n    <div class=\"text-right mb-4\">\n      <button class=\"btn btn-outline-primary\" @click.prevent=\"openCouponModal(true)\">\n        <i class=\"fas fa-plus mr-2\"></i>新增優惠券\n      </button>\n    </div>\n    <table class=\"table table-hover\">\n      <thead>\n        <tr>\n          <th class=\"text-left\">名稱</th>\n          <th class=\"text-left\">優待碼</th>\n          <th class=\"text-center\">折扣百分比</th>\n          <th class=\"text-center\">到期日</th>\n          <th class=\"text-center\">是否啟用</th>\n          <th class=\"text-center\">編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in coupons\" :key=\"item.id\">\n          <td class=\"text-left\">{{ item.title }}</td>\n          <td class=\"text-left\">{{ item.code }}</td>\n          <td class=\"text-center\">{{ item.percent }}%</td>\n          <td class=\"text-center\">{{ item.due_date | date }}</td>\n          <td class=\"text-center\">\n            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\n            <span v-else>未啟用</span>\n          </td>\n          <td class=\"text-center\">\n            <div class=\"btn-group\" role=\"group\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-primary\"\n                @click.prevent=\"openCouponModal (false, item)\"\n              >\n              <i class=\"fas fa-pencil-alt\"></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-orange\"\n                @click.prevent=\"openDelModal (item)\"\n              >\n              <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n\n    <!-- Start Pagination -->\n    <div class=\"d-flex justify-content-center\" v-if=\"pagination.length\">\n      <Pagination :pages=\"pagination\" @emitPages=\"getCoupons\"></Pagination>\n    </div>\n    <!-- End Pagination -->\n\n    <!-- Start CouponModal -->\n    <div\n      class=\"modal fade\"\n      id=\"couponModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"exampleModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-primary text-white\">\n            <h5 class=\"modal-title couponTitle\" id=\"exampleModalLabel\"><span>編輯優惠券</span></h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"form-group\">\n              <label for=\"title\">標題</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"title\"\n                v-model=\"tempCoupon.title\"\n                placeholder=\"請輸入標題\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"coupon_code\">優惠碼</label>\n              <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"coupon_code\"\n                v-model=\"tempCoupon.code\"\n                placeholder=\"請輸入優惠碼\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"due_date\">到期日</label>\n              <input type=\"date\" class=\"form-control\" id=\"due_date\" v-model=\"due_date\" />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"price\">折扣百分比</label>\n              <input\n                type=\"number\"\n                class=\"form-control\"\n                id=\"price\"\n                v-model=\"tempCoupon.percent\"\n                placeholder=\"請輸入折扣百分比\"\n              />\n            </div>\n            <div class=\"form-group\">\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  :true-value=\"1\"\n                  :false-value=\"0\"\n                  v-model=\"tempCoupon.is_enabled\"\n                  id=\"is_enabled\"\n                />\n                <label class=\"form-check-label\" for=\"is_enabled\">是否啟用</label>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary addCoupon\" @click=\"updateCoupon\">更新優惠券</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End ProductModal -->\n\n    <!-- Start DelModal -->\n    <div\n      class=\"modal fade\"\n      id=\"delCouponModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"exampleModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-orange text-white\">\n            <h5 class=\"modal-title delModalTitle\" id=\"exampleModalLabel\">\n              <span>刪除產品</span>\n            </h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            是否刪除\n            <strong class=\"text-orange\">{{ tempCoupon.title }}</strong> 商品(刪除後將無法恢復)。\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\n            <button type=\"button\" class=\"btn btn-orange\" @click.prevent=\"delCoupon\"><i class=\"fas fa-spinner fa-spin mr-2\" v-if=\"status.loadingItem === tempCoupon.id\"></i>確認刪除</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End DelModal -->\n  </div>\n</template>\n<script>\nimport Pagination from '../../components/Pagination'\nimport $ from 'jquery'\n\nexport default {\n  name: 'coupons',\n  components: {\n    Pagination\n  },\n  data () {\n    return {\n      coupons: [],\n      pagination: {},\n      tempCoupon: {\n        title: '',\n        is_enabled: 0,\n        percent: 100,\n        due_date: 0,\n        code: ''\n      },\n      isNew: false,\n      due_date: new Date(),\n      isLoading: false,\n      status: {\n        loadingItem: ''\n      }\n    }\n  },\n  watch: {\n    due_date () {\n      const vm = this\n      // 使用 new Date(vm.due_date) / 1000 將日期轉換成毫秒\n      // 使用 Math.floor() 將毫秒四捨五入取整數\n      const timestamp = Math.floor(new Date(vm.due_date) / 1000)\n      vm.tempCoupon.due_date = timestamp\n    }\n  },\n  methods: {\n    getCoupons () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupons`\n      vm.isLoading = true\n      vm.$http.get(api).then(response => {\n        console.log(response.data)\n        vm.isLoading = false\n        vm.coupons = response.data.coupons\n      })\n    },\n    openCouponModal (isNew, item) {\n      const vm = this\n      if (isNew) {\n        vm.isNew = true\n        vm.tempCoupon = {}\n        $('.couponTitle').text('新增優惠券')\n        $('.addCoupon').text('確認新增優惠券')\n      } else {\n        vm.isNew = false\n        vm.tempCoupon = Object.assign({}, item)\n        $('.couponTitle').text('編輯優惠券')\n        $('.addCoupon').text('更新優惠券')\n      }\n      $('#couponModal').modal('show')\n    },\n    updateCoupon () {\n      const vm = this\n      let api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon`\n      let httpMethod = 'post'\n      if (!vm.isNew) {\n        api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon/${vm.tempCoupon.id}`\n        httpMethod = 'put'\n      }\n      vm.isLoading = true\n      vm.$http[httpMethod](api, { data: vm.tempCoupon }).then(response => {\n        console.log(response.data)\n        vm.isLoading = false\n        $('#couponModal').modal('hide')\n        vm.getCoupons()\n      })\n    },\n    openDelModal (item) {\n      const vm = this\n      vm.tempCoupon = Object.assign({}, item)\n      $('.delModalTitle').text(`刪除優惠券：${vm.tempCoupon.title}`)\n      $('#delCouponModal').modal('show')\n    },\n    delCoupon () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/coupon/${vm.tempCoupon.id}`\n      vm.status.loadingItem = vm.tempCoupon.id\n      vm.$http.delete(api).then(response => {\n        console.log(response.data)\n        vm.status.loadingItem = ''\n        $('#delCouponModal').modal('hide')\n        vm.getCoupons()\n      })\n    }\n  },\n  created () {\n    this.getCoupons()\n  }\n}\n</script>\n"],"sourceRoot":"src/views/backEnd"}]}