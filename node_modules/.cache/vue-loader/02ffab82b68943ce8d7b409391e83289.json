{"remainingRequest":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\src\\views\\frontEnd\\Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\src\\views\\frontEnd\\Product.vue","mtime":1581188248859},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENpcmNsZTQgfSBmcm9tICd2dWUtbG9hZGluZy1zcGlubmVyJwppbXBvcnQgSGVhZGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSGVhZGVyJwppbXBvcnQgRm9vdGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRm9vdGVyJwppbXBvcnQgQ2FydCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0NhcnQnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ3Byb2R1Y3QnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFnZU5hbWU6ICfns7vliJfnlKLlk4EnLAogICAgICBwcm9kdWN0OiB7fSwKICAgICAgY2FydHM6IFtdLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBzdGF0dXM6IHsKICAgICAgICBhZGRUb0NhcnRJY29uOiBmYWxzZQogICAgICB9CiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBDaXJjbGU0LAogICAgSGVhZGVyLAogICAgRm9vdGVyLAogICAgQ2FydAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0UHJvZHVjdCAoKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBwcm9kdWN0SUQgPSB2bS4kcm91dGUucGFyYW1zLmlkCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vYXBpLyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRIfS9wcm9kdWN0LyR7cHJvZHVjdElEfWAKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZQogICAgICB2bS4kaHR0cC5nZXQoYXBpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnByb2R1Y3QpCiAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICB2bS5wcm9kdWN0ID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0CiAgICAgICAgLy8g5pW46YeP6aCQ6Kit5YC854K6MQogICAgICAgIHZtLnByb2R1Y3QubnVtID0gMQogICAgICB9KQogICAgfSwKICAgIGdldENhcnQgKCkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L2NhcnRgCiAgICAgIHZtLiRodHRwLmdldChhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YS5kYXRhLmNhcnRzKQogICAgICAgIHZtLmNhcnRzID0gcmVzcG9uc2UuZGF0YS5kYXRhLmNhcnRzCiAgICAgIH0pCiAgICB9LAogICAgYWRkVG9DYXJ0IChpZCwgcXR5ID0gMSkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L2NhcnRgCiAgICAgIGNvbnN0IGNhcnQgPSB7CiAgICAgICAgcHJvZHVjdF9pZDogaWQsCiAgICAgICAgcXR5OiBxdHkKICAgICAgfQogICAgICB2bS5zdGF0dXMuYWRkVG9DYXJ0SWNvbiA9IHRydWUKICAgICAgdm0uJGh0dHAucG9zdChhcGksIHsgZGF0YTogY2FydCB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICB2bS5nZXRDYXJ0KCkKICAgICAgICB2bS5zdGF0dXMuYWRkVG9DYXJ0SWNvbiA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgZGVsZXRlSXRlbSAoaWQpIHsKICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vYXBpLyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRIfS9jYXJ0LyR7aWR9YAogICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIHZtLiRodHRwLmRlbGV0ZShhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgdm0uZ2V0Q2FydCgpCiAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5nZXRQcm9kdWN0KCkKICAgIHRoaXMuZ2V0Q2FydCgpCiAgfQp9Cg=="},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views/frontEnd","sourcesContent":["<template>\n  <div class=\"mainContent\">\n    <loading :active.sync=\"isLoading\">\n      <Circle4></Circle4>\n    </loading>\n    <!-- Start Header -->\n    <Header/>\n    <!-- End Header -->\n\n    <!-- Start Content -->\n    <div class=\"container\">\n      <nav aria-label=\"breadcrumb\">\n        <ol class=\"breadcrumb my-2 p-0 bg-transparent\">\n          <li class=\"breadcrumb-item\"><router-link to=\"/\">首頁</router-link></li>\n          <li class=\"breadcrumb-item\"><router-link to=\"/products\">創意巧克力</router-link></li>\n          <li class=\"breadcrumb-item active\" aria-current=\"page\">{{product.title}}</li>\n        </ol>\n      </nav>\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <h3 class=\"mb-4 productTitle\">{{product.title}}</h3>\n          <p class=\"mb-4 productPrice\"><span class=\"origin_price mr-2\" v-if=\"product.origin_price !== product.price\">市價:{{product.origin_price | currency}}</span>網路價：<span class=\"price\">{{product.price | currency}}</span></p>\n          <select class=\"form-control mb-4\" v-model=\"product.num\">\n            <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">選購 {{num}} {{product.unit}}</option>\n          </select>\n          <button class=\"btn btn-primary btn-block\" @click=\"addToCart(product.id, product.num)\">加入購物車<i class=\"fas fa-spinner fa-spin ml-2\" v-if=\"status.addToCartIcon\"></i></button>\n        </div>\n        <div class=\"col-md-8\">\n          <img :src=\"`${product.imageUrl}`\" :alt=\"`${product.title}`\" class=\"img img-fluid mb-4\">\n          <div class=\"jumbotron\">\n            {{product.discription}}\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End Content -->\n\n    <!-- cart Icon -->\n    <Cart :cart=\"carts\" @emitDelete=\"deleteItem\"></Cart>\n    <!---->\n\n    <!-- Start Footer -->\n    <Footer/>\n    <!-- End Footer -->\n  </div>\n</template>\n\n<script>\nimport { Circle4 } from 'vue-loading-spinner'\nimport Header from '../../components/Header'\nimport Footer from '../../components/Footer'\nimport Cart from '../../components/Cart'\n\nexport default {\n  name: 'product',\n  data () {\n    return {\n      pageName: '系列產品',\n      product: {},\n      carts: [],\n      isLoading: false,\n      status: {\n        addToCartIcon: false\n      }\n    }\n  },\n  components: {\n    Circle4,\n    Header,\n    Footer,\n    Cart\n  },\n  methods: {\n    getProduct () {\n      const vm = this\n      const productID = vm.$route.params.id\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${productID}`\n      vm.isLoading = true\n      vm.$http.get(api).then(response => {\n        console.log(response.data.product)\n        vm.isLoading = false\n        vm.product = response.data.product\n        // 數量預設值為1\n        vm.product.num = 1\n      })\n    },\n    getCart () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n      vm.$http.get(api).then((response) => {\n        console.log(response.data.data.carts)\n        vm.carts = response.data.data.carts\n      })\n    },\n    addToCart (id, qty = 1) {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n      const cart = {\n        product_id: id,\n        qty: qty\n      }\n      vm.status.addToCartIcon = true\n      vm.$http.post(api, { data: cart }).then(response => {\n        console.log(response)\n        vm.getCart()\n        vm.status.addToCartIcon = false\n      })\n    },\n    deleteItem (id) {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`\n      vm.isLoading = true\n      vm.$http.delete(api).then((response) => {\n        vm.getCart()\n        vm.isLoading = false\n      })\n    }\n  },\n  created () {\n    this.getProduct()\n    this.getCart()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/all.scss\";\n\n.mainContent{\n  height: 100vh;\n}\n.productTitle{\n  font-weight: bold;\n  font-size: 24px;\n  line-height: 24px;\n}\n.productPrice{\n  font-size: 16px;\n  line-height: 16px;\n  .price{\n    font-size: 20px;\n    font-weight: bold;\n  }\n  .origin_price{\n    text-decoration: line-through;\n    color: #cccccc;\n  }\n}\n</style>\n"]}]}