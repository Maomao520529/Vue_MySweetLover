{"remainingRequest":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\Product.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\Product.vue","mtime":1583937241767},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBbGVydCBmcm9tICcuLi8uLi9jb21wb25lbnRzL0FsZXJ0TWVzc2FnZScKaW1wb3J0IEhlYWRlciBmcm9tICcuLi8uLi9jb21wb25lbnRzL0hlYWRlcicKaW1wb3J0IENhcnQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9DYXJ0JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9kdWN0JywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2VOYW1lOiAn57O75YiX55Si5ZOBJywKICAgICAgcHJvZHVjdDoge30sCiAgICAgIGNhcnRzOiBbXSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgc3RhdHVzOiB7CiAgICAgICAgYWRkVG9DYXJ0SWNvbjogZmFsc2UKICAgICAgfQogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgSGVhZGVyLAogICAgQ2FydCwKICAgIEFsZXJ0CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQcm9kdWN0ICgpIHsKICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgIGNvbnN0IHByb2R1Y3RJRCA9IHZtLiRyb3V0ZS5wYXJhbXMuaWQKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L3Byb2R1Y3QvJHtwcm9kdWN0SUR9YAogICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIHZtLiRodHRwLmdldChhcGkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLmRhdGEucHJvZHVjdCkKICAgICAgICB2bS5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgIHZtLnByb2R1Y3QgPSByZXNwb25zZS5kYXRhLnByb2R1Y3QKICAgICAgICAvLyDmlbjph4/poJDoqK3lgLzngroxCiAgICAgICAgdm0ucHJvZHVjdC5udW0gPSAxCiAgICAgIH0pCiAgICB9LAogICAgZ2V0Q2FydCAoKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vY2FydGAKICAgICAgdm0uJGh0dHAuZ2V0KGFwaSkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLmRhdGEuY2FydHMpCiAgICAgICAgdm0uY2FydHMgPSByZXNwb25zZS5kYXRhLmRhdGEuY2FydHMKICAgICAgfSkKICAgIH0sCiAgICBhZGRUb0NhcnQgKGlkLCBxdHkgPSAxKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vY2FydGAKICAgICAgY29uc3QgY2FydCA9IHsKICAgICAgICBwcm9kdWN0X2lkOiBpZCwKICAgICAgICBxdHk6IHF0eQogICAgICB9CiAgICAgIHZtLnN0YXR1cy5hZGRUb0NhcnRJY29uID0gdHJ1ZQogICAgICB2bS4kaHR0cC5wb3N0KGFwaSwgeyBkYXRhOiBjYXJ0IH0pLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgdm0uZ2V0Q2FydCgpCiAgICAgICAgICB2bS5zdGF0dXMuYWRkVG9DYXJ0SWNvbiA9IGZhbHNlCiAgICAgICAgICAvLyB2bS5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgICAgdm0uJGJ1cy4kZW1pdCgnbWVzc2FnZTpwdXNoJywgcmVzcG9uc2UuZGF0YS5tZXNzYWdlLCAncHJpbWFyeScpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZtLiRidXMuJGVtaXQoJ21lc3NhZ2U6cHVzaCcsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgJ2RhbmdlcicpCiAgICAgICAgfQogICAgICB9KQogICAgfSwKICAgIGRlbGV0ZUl0ZW0gKGlkKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vY2FydC8ke2lkfWAKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZQogICAgICB2bS5heGlvcy5kZWxldGUoYXBpKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIHZtLmdldENhcnQoKQogICAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2UKICAgICAgICAgIHZtLiRidXMuJGVtaXQoJ21lc3NhZ2U6cHVzaCcsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgJ29yYW5nZScpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZtLiRidXMuJGVtaXQoJ21lc3NhZ2U6cHVzaCcsIHJlc3BvbnNlLmRhdGEubWVzc2FnZSwgJ2RhbmdlcicpCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLmdldFByb2R1Y3QoKQogICAgdGhpcy5nZXRDYXJ0KCkKICB9Cn0K"},{"version":3,"sources":["Product.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Product.vue","sourceRoot":"src/views/frontEnd","sourcesContent":["<template>\n  <div class=\"mainContent\">\n    <Alert/>\n    <loading :active.sync=\"isLoading\">\n        <img src=\"../../assets/images/load.gif\" alt=\"loading\">\n    </loading>\n    <!-- Start Header -->\n    <Header/>\n    <!-- End Header -->\n\n    <!-- Start Content -->\n    <div class=\"container\">\n       <nav aria-label=\"breadcrumb \">\n          <ol class=\"breadcrumb mb-3 p-0 bg-transparent\">\n            <li class=\"breadcrumb-item\">\n              <router-link :to=\"{name:'Index'}\" class=\"breadcrumb-link\">首頁</router-link>\n            </li>\n            <li class=\"breadcrumb-item\">\n              <router-link :to=\"{name:'Products'}\" class=\"breadcrumb-link\">創意巧克力</router-link>\n            </li>\n            <li class=\"breadcrumb-item active\" aria-current=\"page\">{{product.title}}</li>\n          </ol>\n        </nav>\n      <div class=\"row\">\n        <div class=\"col-md-4\">\n          <h3 class=\"mb-4 productTitle\">{{product.title}}</h3>\n          <p class=\"mb-4 productPrice\"><span class=\"origin_price mr-2\" v-if=\"product.origin_price !== product.price\">市價:{{product.origin_price | currency}}</span>網路價：<span class=\"price\">{{product.price | currency}}</span></p>\n          <select class=\"form-control mb-4\" v-model=\"product.num\">\n            <option :value=\"num\" v-for=\"num in 10\" :key=\"num\">選購 {{num}} {{product.unit}}</option>\n          </select>\n          <button class=\"btn btn-primary btn-block mb-4\" @click=\"addToCart(product.id, product.num)\">加入購物車<i class=\"fas fa-spinner fa-spin ml-2\" v-if=\"status.addToCartIcon\"></i></button>\n        </div>\n        <div class=\"col-md-8\">\n          <img :src=\"`${product.imageUrl}`\" :alt=\"`${product.title}`\" class=\"img img-fluid mb-4\">\n          <div class=\"jumbotron\">\n            {{product.discription}}\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End Content -->\n\n    <!-- cart Icon -->\n    <Cart :cart=\"carts\" @emitDelete=\"deleteItem\"></Cart>\n    <!---->\n  </div>\n</template>\n\n<script>\nimport Alert from '../../components/AlertMessage'\nimport Header from '../../components/Header'\nimport Cart from '../../components/Cart'\n\nexport default {\n  name: 'product',\n  data () {\n    return {\n      pageName: '系列產品',\n      product: {},\n      carts: [],\n      isLoading: false,\n      status: {\n        addToCartIcon: false\n      }\n    }\n  },\n  components: {\n    Header,\n    Cart,\n    Alert\n  },\n  methods: {\n    getProduct () {\n      const vm = this\n      const productID = vm.$route.params.id\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/product/${productID}`\n      vm.isLoading = true\n      vm.$http.get(api).then(response => {\n        console.log(response.data.product)\n        vm.isLoading = false\n        vm.product = response.data.product\n        // 數量預設值為1\n        vm.product.num = 1\n      })\n    },\n    getCart () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n      vm.$http.get(api).then((response) => {\n        console.log(response.data.data.carts)\n        vm.carts = response.data.data.carts\n      })\n    },\n    addToCart (id, qty = 1) {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart`\n      const cart = {\n        product_id: id,\n        qty: qty\n      }\n      vm.status.addToCartIcon = true\n      vm.$http.post(api, { data: cart }).then(response => {\n        console.log(response)\n        if (response.data.success) {\n          console.log(response)\n          vm.getCart()\n          vm.status.addToCartIcon = false\n          // vm.isLoading = false\n          vm.$bus.$emit('message:push', response.data.message, 'primary')\n        } else {\n          vm.$bus.$emit('message:push', response.data.message, 'danger')\n        }\n      })\n    },\n    deleteItem (id) {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/cart/${id}`\n      vm.isLoading = true\n      vm.axios.delete(api).then((response) => {\n        if (response.data.success) {\n          vm.getCart()\n          vm.isLoading = false\n          vm.$bus.$emit('message:push', response.data.message, 'orange')\n        } else {\n          vm.$bus.$emit('message:push', response.data.message, 'danger')\n        }\n      })\n    }\n  },\n  created () {\n    this.getProduct()\n    this.getCart()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/all.scss\";\n\n.container {\n  padding-top: 8vh;\n}\n.breadcrumb-link:focus,\n.breadcrumb-link:hover,\n.breadcrumb-link:active{\n  text-decoration: none;\n}\n.jumbotron {\n  background-color: rgba(98, 171, 240, 0.288);\n}\n.mainContent{\n  height: 100vh;\n}\n.productTitle{\n  font-weight: bold;\n  font-size: 24px;\n  line-height: 24px;\n}\n.productPrice{\n  font-size: 16px;\n  line-height: 16px;\n  .price{\n    font-size: 20px;\n    font-weight: bold;\n  }\n  .origin_price{\n    text-decoration: line-through;\n    color: #cccccc;\n  }\n}\n</style>\n"]}]}