{"remainingRequest":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作品集\\Vue_MySweetLover\\src\\views\\backEnd\\ProductsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\作品集\\Vue_MySweetLover\\src\\views\\backEnd\\ProductsList.vue","mtime":1583938825628},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBQYWdpbmF0aW9uIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvUGFnaW5hdGlvbicKaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdwcm9kdWN0cycsCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdGlvbgogIH0sCiAgZGF0YSAoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9kdWN0czogW10sCiAgICAgIHBhZ2luYXRpb246IHt9LAogICAgICB0ZW1wUHJvZHVjdDoge30sCiAgICAgIGlzTmV3OiBmYWxzZSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgc3RhdHVzOiB7CiAgICAgICAgZmlsZVVwbG9hZGluZzogZmFsc2UsCiAgICAgICAgbG9hZGluZ0l0ZW06ICcnCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFByb2R1Y3RzIChwYWdlID0gMSkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L2FkbWluL3Byb2R1Y3RzP3BhZ2U9JHtwYWdlfWAKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZQogICAgICB2bS4kaHR0cC5nZXQoYXBpKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICB2bS5pc0xvYWRpbmcgPSBmYWxzZQogICAgICAgIHZtLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cwogICAgICAgIHZtLnBhZ2luYXRpb24gPSByZXNwb25zZS5kYXRhLnBhZ2luYXRpb24KICAgICAgfSkKICAgIH0sCiAgICBvcGVuUHJvZHVjdE1vZGFsIChpc05ldywgaXRlbSkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgaWYgKGlzTmV3KSB7CiAgICAgICAgdm0uaXNOZXcgPSB0cnVlCiAgICAgICAgdm0udGVtcFByb2R1Y3QgPSB7fQogICAgICAgICQoJy5lZGl0TW9kYWxUaXRsZScpLnRleHQoJ+aWsOWinueUouWTgScpCiAgICAgICAgJCgnLmFkZFByb2R1Y3QnKS50ZXh0KCfnorroqo3mlrDlop7nlKLlk4EnKQogICAgICB9IGVsc2UgewogICAgICAgIHZtLmlzTmV3ID0gZmFsc2UKICAgICAgICB2bS50ZW1wUHJvZHVjdCA9IE9iamVjdC5hc3NpZ24oe30sIGl0ZW0pCiAgICAgICAgJCgnLmVkaXRNb2RhbFRpdGxlJykudGV4dChg57eo6Lyv55Si5ZOBOiAke3ZtLnRlbXBQcm9kdWN0LnRpdGxlfWApCiAgICAgICAgJCgnLmFkZFByb2R1Y3QnKS50ZXh0KCfmm7TmlrDnlKLlk4EnKQogICAgICB9CiAgICAgICQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnc2hvdycpCiAgICB9LAogICAgdXBkYXRlUHJvZHVjdCAoKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBsZXQgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L2FkbWluL3Byb2R1Y3RgCiAgICAgIGxldCBodHRwTWV0aG9kID0gJ3Bvc3QnCiAgICAgIGlmICghdm0uaXNOZXcpIHsKICAgICAgICBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vYWRtaW4vcHJvZHVjdC8ke3ZtLnRlbXBQcm9kdWN0LmlkfWAKICAgICAgICBodHRwTWV0aG9kID0gJ3B1dCcKICAgICAgfQogICAgICB2bS4kaHR0cFtodHRwTWV0aG9kXShhcGksIHsgZGF0YTogdm0udGVtcFByb2R1Y3QgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJykKICAgICAgICAgIHZtLmdldFByb2R1Y3RzKCkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdoaWRlJykKICAgICAgICAgIGNvbnNvbGUubG9nKCfmlrDlop7lpLHmlZcnKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICB1cGxvYWRGaWxlICgpIHsKICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZSA9IHRoaXMuJHJlZnMuZmlsZXMuZmlsZXNbMF0KICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKQogICAgICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vYWRtaW4vdXBsb2FkYAogICAgICAvLyDkvb/nlKggRm9ybURhdGEg5L6G5YKz6YCB6LOH5paZ5Yiw5b6M56uvCiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnZmlsZS10by11cGxvYWQnLCB1cGxvYWRlZEZpbGUpCiAgICAgIHZtLnN0YXR1cy5maWxlVXBsb2FkaW5nID0gdHJ1ZQogICAgICB2bS4kaHR0cC5wb3N0KHVybCwgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICB2bS5zdGF0dXMuZmlsZVVwbG9hZGluZyA9IGZhbHNlCiAgICAgICAgICAvLyDpgI/pgY4gJHNldCjlr6vlhaXnmoTnm67mqJksIGtleeWAvCwg5a+r5YWl55qE6LOH5paZKSDmjIfku6TvvIzlsIfmrITkvY3lkI3nqLHlvLfliLblr6vlhaUKICAgICAgICAgIHZtLiRzZXQodm0udGVtcFByb2R1Y3QsICdpbWFnZVVybCcsIHJlc3BvbnNlLmRhdGEuaW1hZ2VVcmwpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOmAj+mBjiAkYnVzLiRlbWl0KCkg5oyH5Luk77yM6Lez5Ye65o+Q56S66KaW56qXCiAgICAgICAgICB2bS4kYnVzLiRlbWl0KCdtZXNzYWdlOnB1c2gnLCByZXNwb25zZS5kYXRhLm1lc3NhZ2UsICdkYW5nZXInKQogICAgICAgIH0KICAgICAgfSkKICAgIH0sCiAgICBkZWxNb2RhbCAoaXRlbSkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgdm0udGVtcFByb2R1Y3QgPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKQogICAgICAkKCcjZGVsUHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKQogICAgfSwKICAgIGRlbFByb2R1Y3QgKCkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L2FkbWluL3Byb2R1Y3QvJHt2bS50ZW1wUHJvZHVjdC5pZH1gCiAgICAgIHZtLnN0YXR1cy5sb2FkaW5nSXRlbSA9IHZtLnRlbXBQcm9kdWN0LmlkCiAgICAgIHZtLiRodHRwLmRlbGV0ZShhcGkpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICQoJyNkZWxQcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpCiAgICAgICAgdm0uc3RhdHVzLmxvYWRpbmdJdGVtID0gJycKICAgICAgICB2bS5nZXRQcm9kdWN0cygpCiAgICAgIH0pCiAgICB9CiAgfSwKICBjcmVhdGVkICgpIHsKICAgIHRoaXMuZ2V0UHJvZHVjdHMoKQogIH0KfQo="},{"version":3,"sources":["ProductsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0PA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductsList.vue","sourceRoot":"src/views/backEnd","sourcesContent":["<template>\n  <div class=\"products\">\n    <loading :active.sync=\"isLoading\">\n      <img src=\"../../assets/images/load.gif\" alt=\"loading\">\n      <!-- <Circle4></Circle4> -->\n    </loading>\n\n    <div class=\"text-right mb-4\">\n      <button class=\"btn btn-outline-primary\" @click.prevent=\"openProductModal(true)\">\n        <i class=\"fas fa-plus mr-2\"></i>新增產品\n      </button>\n    </div>\n    <table class=\"table table-hover\">\n      <thead>\n        <tr>\n          <th class=\"text-left\" width=\"120\">分類</th>\n          <th class=\"text-left\">產品名稱</th>\n          <th class=\"text-center\" width=\"100\">原價</th>\n          <th class=\"text-center\" width=\"100\">網路價</th>\n          <th class=\"text-center\" width=\"100\">是否販售</th>\n          <th class=\"text-center\" width=\"150\">編輯</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr v-for=\"item in products\" :key=\"item.id\">\n          <td class=\"text-left\">{{ item.category }}</td>\n          <td class=\"text-left\">{{ item.title }}</td>\n          <td class=\"text-right\">{{ item.origin_price | currency }}</td>\n          <td class=\"text-right\">{{ item.price | currency }}</td>\n          <td class=\"text-center\">\n            <span v-if=\"item.is_enabled\" class=\"text-success\">啟用</span>\n            <span v-else>未啟用</span>\n          </td>\n          <td class=\"text-center\">\n            <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-primary\"\n                @click.prevent=\"openProductModal(false, item)\"\n              >\n                <i class=\"fas fa-pencil-alt\"></i>\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-orange\"\n                @click.prevent=\"delModal(item)\"\n              >\n                <i class=\"fas fa-trash-alt\"></i>\n              </button>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n    <!-- Start Pagination -->\n    <div class=\"d-flex justify-content-center\">\n      <Pagination :pages=\"pagination\" @emitPages=\"getProducts\"></Pagination>\n    </div>\n    <!-- End Pagination -->\n\n    <!-- Start ProductModal -->\n    <div\n      class=\"modal fade\"\n      id=\"productModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"productModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog modal-lg\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-primary text-white\">\n            <h5 class=\"modal-title editModalTitle\" id=\"productModalLabel\">\n              <span>編輯產品</span>\n            </h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <i class=\"far fa-times-circle text-white\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"row\">\n              <div class=\"col-sm-4\">\n                <div class=\"form-group\">\n                  <label for=\"image\">輸入圖片網址</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"image\"\n                    placeholder=\"請輸入圖片連結\"\n                    v-model=\"tempProduct.imageUrl\"\n                  />\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"customFile\">\n                    或 上傳圖片\n                    <i class=\"fas fa-spinner fa-spin\" v-if=\"status.fileUploading\"></i>\n                  </label>\n                  <input\n                    type=\"file\"\n                    id=\"customFile\"\n                    class=\"form-control\"\n                    ref=\"files\"\n                    @change=\"uploadFile\"\n                  />\n                </div>\n                <img\n                  img=\"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80\"\n                  class=\"img-fluid\"\n                  alt\n                  :src=\"tempProduct.imageUrl\"\n                />\n              </div>\n              <div class=\"col-sm-8\">\n                <div class=\"form-group\">\n                  <label for=\"title\">標題</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"title\"\n                    placeholder=\"請輸入標題\"\n                    v-model=\"tempProduct.title\"\n                  />\n                </div>\n\n                <div class=\"form-row\">\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"category\">分類</label>\n                    <input\n                      type=\"text\"\n                      class=\"form-control\"\n                      id=\"category\"\n                      placeholder=\"請輸入分類\"\n                      v-model=\"tempProduct.category\"\n                    />\n                  </div>\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"price\">單位</label>\n                    <input\n                      type=\"unit\"\n                      class=\"form-control\"\n                      id=\"unit\"\n                      placeholder=\"請輸入單位\"\n                      v-model=\"tempProduct.unit\"\n                    />\n                  </div>\n                </div>\n\n                <div class=\"form-row\">\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"origin_price\">原價</label>\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"origin_price\"\n                      placeholder=\"請輸入原價\"\n                      v-model=\"tempProduct.origin_price\"\n                    />\n                  </div>\n                  <div class=\"form-group col-md-6\">\n                    <label for=\"price\">售價</label>\n                    <input\n                      type=\"number\"\n                      class=\"form-control\"\n                      id=\"price\"\n                      placeholder=\"請輸入售價\"\n                      v-model=\"tempProduct.price\"\n                    />\n                  </div>\n                </div>\n                <hr />\n\n                <div class=\"form-group\">\n                  <label for=\"description\">產品描述</label>\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"description\"\n                    placeholder=\"請輸入產品描述\"\n                    v-model=\"tempProduct.discription\"\n                  ></textarea>\n                </div>\n                <div class=\"form-group\">\n                  <label for=\"content\">說明內容</label>\n                  <textarea\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"content\"\n                    placeholder=\"請輸入產品說明內容\"\n                    v-model=\"tempProduct.content\"\n                  ></textarea>\n                </div>\n                <div class=\"form-group\">\n                  <div class=\"form-check\">\n                    <input\n                      class=\"form-check-input\"\n                      type=\"checkbox\"\n                      id=\"is_enabled\"\n                      v-model=\"tempProduct.is_enabled\"\n                      :true-value=\"1\"\n                      :false-value=\"0\"\n                    />\n                    <label class=\"form-check-label\" for=\"is_enabled\">是否啟用</label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\n            <button type=\"button\" class=\"btn btn-primary addProduct\" @click=\"updateProduct\">更新確認</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End ProductModal -->\n\n    <!-- Start DelModal -->\n    <div\n      class=\"modal fade\"\n      id=\"delProductModal\"\n      tabindex=\"-1\"\n      role=\"dialog\"\n      aria-labelledby=\"exampleModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-orange text-white\">\n            <h5 class=\"modal-title delModalTitle\" id=\"exampleModalLabel\">\n              <span>刪除產品</span>\n            </h5>\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n              <i class=\"far fa-times-circle text-white\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n          <div class=\"modal-body\">\n            是否刪除\n            <strong class=\"text-orange\">{{ tempProduct.title }}</strong> 商品(刪除後將無法恢復)。\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\n            <button type=\"button\" class=\"btn btn-orange\" @click.prevent=\"delProduct\"><i class=\"fas fa-spinner fa-spin mr-2\" v-if=\"status.loadingItem === tempProduct.id\"></i>確認刪除</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- End DelModal -->\n  </div>\n</template>\n<script>\nimport Pagination from '../../components/Pagination'\nimport $ from 'jquery'\n\nexport default {\n  name: 'products',\n  components: {\n    Pagination\n  },\n  data () {\n    return {\n      products: [],\n      pagination: {},\n      tempProduct: {},\n      isNew: false,\n      isLoading: false,\n      status: {\n        fileUploading: false,\n        loadingItem: ''\n      }\n    }\n  },\n  methods: {\n    getProducts (page = 1) {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/products?page=${page}`\n      vm.isLoading = true\n      vm.$http.get(api).then(response => {\n        console.log(response)\n        vm.isLoading = false\n        vm.products = response.data.products\n        vm.pagination = response.data.pagination\n      })\n    },\n    openProductModal (isNew, item) {\n      const vm = this\n      if (isNew) {\n        vm.isNew = true\n        vm.tempProduct = {}\n        $('.editModalTitle').text('新增產品')\n        $('.addProduct').text('確認新增產品')\n      } else {\n        vm.isNew = false\n        vm.tempProduct = Object.assign({}, item)\n        $('.editModalTitle').text(`編輯產品: ${vm.tempProduct.title}`)\n        $('.addProduct').text('更新產品')\n      }\n      $('#productModal').modal('show')\n    },\n    updateProduct () {\n      const vm = this\n      let api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/product`\n      let httpMethod = 'post'\n      if (!vm.isNew) {\n        api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/product/${vm.tempProduct.id}`\n        httpMethod = 'put'\n      }\n      vm.$http[httpMethod](api, { data: vm.tempProduct }).then(response => {\n        if (response.data.success) {\n          $('#productModal').modal('hide')\n          vm.getProducts()\n        } else {\n          $('#productModal').modal('hide')\n          console.log('新增失敗')\n        }\n      })\n    },\n    uploadFile () {\n      const vm = this\n      const uploadedFile = this.$refs.files.files[0]\n      const formData = new FormData()\n      const url = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/upload`\n      // 使用 FormData 來傳送資料到後端\n      formData.append('file-to-upload', uploadedFile)\n      vm.status.fileUploading = true\n      vm.$http.post(url, formData, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      }).then(response => {\n        if (response.data.success) {\n          vm.status.fileUploading = false\n          // 透過 $set(寫入的目標, key值, 寫入的資料) 指令，將欄位名稱強制寫入\n          vm.$set(vm.tempProduct, 'imageUrl', response.data.imageUrl)\n        } else {\n          // 透過 $bus.$emit() 指令，跳出提示視窗\n          vm.$bus.$emit('message:push', response.data.message, 'danger')\n        }\n      })\n    },\n    delModal (item) {\n      const vm = this\n      vm.tempProduct = Object.assign({}, item)\n      $('#delProductModal').modal('show')\n    },\n    delProduct () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/admin/product/${vm.tempProduct.id}`\n      vm.status.loadingItem = vm.tempProduct.id\n      vm.$http.delete(api).then(response => {\n        console.log(response)\n        $('#delProductModal').modal('hide')\n        vm.status.loadingItem = ''\n        vm.getProducts()\n      })\n    }\n  },\n  created () {\n    this.getProducts()\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\ntextarea {\n  resize : none;\n}\n</style>\n"]}]}