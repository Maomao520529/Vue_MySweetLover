{"remainingRequest":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\src\\views\\frontEnd\\CustomerCheckout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\src\\views\\frontEnd\\CustomerCheckout.vue","mtime":1581209669839},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Maomao File\\新增資料夾 (2)\\Vue_EC-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IENpcmNsZTQgfSBmcm9tICd2dWUtbG9hZGluZy1zcGlubmVyJwppbXBvcnQgSGVhZGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvSGVhZGVyJwppbXBvcnQgRm9vdGVyIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvRm9vdGVyJwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdjdXN0b21lckNoZWNrdW90JywKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIG9yZGVyOiB7CiAgICAgICAgdXNlcjoge30KICAgICAgfSwKICAgICAgb3JkZXJJZDogJycKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENpcmNsZTQsCiAgICBIZWFkZXIsCiAgICBGb290ZXIKICB9LAogIG1ldGhvZHM6IHsKICAgIGdldE9yZGVyICgpIHsKICAgICAgY29uc3Qgdm0gPSB0aGlzCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vYXBpLyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9DVVNUT01QQVRIfS9vcmRlci8ke3ZtLm9yZGVySWR9YAogICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIHZtLiRodHRwLmdldChhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgdm0ub3JkZXIgPSByZXNwb25zZS5kYXRhLm9yZGVyCiAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0sCiAgICBwYXlPcmRlciAoKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vcGF5LyR7dm0ub3JkZXJJZH1gCiAgICAgIHZtLmlzTG9hZGluZyA9IHRydWUKICAgICAgdm0uJGh0dHAucG9zdChhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpCiAgICAgICAgICB2bS4kcm91dGVyLnB1c2goYC9wYXltZW50X3N1Y2Nlc3MvJHt2bS5vcmRlcklkfWApCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCfntZDluLPlpLHmlZcnKQogICAgICAgIH0KICAgICAgICB2bS5pc0xvYWRpbmcgPSBmYWxzZQogICAgICB9KQogICAgfQogIH0sCiAgY3JlYXRlZCAoKSB7CiAgICB0aGlzLm9yZGVySWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMub3JkZXJJZAogICAgdGhpcy5nZXRPcmRlcigpCiAgfQp9Cg=="},{"version":3,"sources":["CustomerCheckout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomerCheckout.vue","sourceRoot":"src/views/frontEnd","sourcesContent":["<template>\n  <div>\n    <loading :active.sync=\"isLoading\">\n      <Circle4></Circle4>\n    </loading>\n    <!-- Start Header -->\n    <Header/>\n    <!-- End Header -->\n\n    <!-- Start Content -->\n    <div class=\"container mt\">\n        <div class=\"row mb-5\">\n            <div class=\"col-md-10 offset-md-1\">\n                <div class=\"row\">\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step\">資料填寫</div>\n                    </div>\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step active\">確認訂單</div>\n                    </div>\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step\">完成</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3\">\n                <form @submit.prevent=\"payOrder\">\n                  <table class=\"table mb-5\">\n                    <thead>\n                      <tr>\n                        <td class=\"text-left\">品名</td>\n                        <td width=\"20%\" class=\"text-center\">數量</td>\n                        <td width=\"30%\" class=\"text-center\">單價</td>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"item in order.products\" :key=\"item.id\">\n                        <td class=\"text-left\">{{ item.product.title }}</td>\n                        <td class=\"text-center\">{{ item.qty }}/{{ item.product.unit }}</td>\n                        <td class=\"text-right\">{{ item.final_total | currency }}</td>\n                      </tr>\n                      <tr>\n                        <td colspan=\"2\" class=\"text-right checkoutFinalTotal\">總計</td>\n                        <td class=\"text-right checkoutFinalTotal\">{{ order.total | currency }}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table class=\"table mb-5\">\n                    <tr>\n                      <td colspan=\"2\" class=\"text-center border-0 memberTitle\">會員資料核對</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">Email</td>\n                      <td>{{ order.user.email }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">姓名</td>\n                      <td>{{ order.user.name }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">電話</td>\n                      <td>{{ order.user.tel }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">地址</td>\n                      <td>{{ order.user.address }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">付款狀態</td>\n                      <td>\n                        <span v-if=\"!order.is_paid\">尚未付款</span>\n                        <span v-else class=\"text-success\">付款完成</span>\n                      </td>\n                    </tr>\n                  </table>\n                  <div class=\"text-right\">\n                    <button type=\"submit\" class=\"btn btn-danger mb-4\" v-if=\"order.is_paid === false\">確認付款去</button>\n                  </div>\n                </form>\n            </div>\n        </div>\n    </div>\n    <!-- End Content -->\n\n    <!-- Start Footer -->\n    <Footer/>\n    <!-- End Footer -->\n  </div>\n</template>\n\n<script>\nimport { Circle4 } from 'vue-loading-spinner'\nimport Header from '../../components/Header'\nimport Footer from '../../components/Footer'\n\nexport default {\n  name: 'customerCheckuot',\n  data () {\n    return {\n      isLoading: false,\n      order: {\n        user: {}\n      },\n      orderId: ''\n    }\n  },\n  components: {\n    Circle4,\n    Header,\n    Footer\n  },\n  methods: {\n    getOrder () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order/${vm.orderId}`\n      vm.isLoading = true\n      vm.$http.get(api).then((response) => {\n        console.log(response)\n        vm.order = response.data.order\n        vm.isLoading = false\n      })\n    },\n    payOrder () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/pay/${vm.orderId}`\n      vm.isLoading = true\n      vm.$http.post(api).then((response) => {\n        if (response.data.success) {\n          console.log(response)\n          vm.$router.push(`/payment_success/${vm.orderId}`)\n        } else {\n          console.log('結帳失敗')\n        }\n        vm.isLoading = false\n      })\n    }\n  },\n  created () {\n    this.orderId = this.$route.params.orderId\n    this.getOrder()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/all.scss\";\n\n.step{\n    width: 100%;\n    padding: 10px 0;\n    font-size: 16px;\n    line-height: 20px;\n    text-align: center;\n    color: $primary;\n    border: 1px solid $primary;\n    border-radius: 20px;\n    &.active{\n        background-color: $primary;\n        color: white\n    }\n}\n#accordion{\n    width: 100%;\n    .btn-link,\n    .btn-link:hover{\n        text-decoration: none;\n    }\n    .totalPrice{\n        font-weight: bold;\n    }\n}\ntextarea{\n  resize: none;\n}\n.checkoutFinalTotal{\n  font-size: 24px;\n  line-height: 24px;\n  font-weight: bold;\n  color: $danger;\n}\n.memberTitle{\n  font-size: 26px;\n  line-height: 26px;\n  font-weight: bold;\n  color: $black;\n}\n</style>\n"]}]}