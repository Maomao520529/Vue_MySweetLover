{"remainingRequest":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\CustomerCheckout.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\作品集\\Vue_MySweetLover\\src\\views\\frontEnd\\CustomerCheckout.vue","mtime":1583916868052},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\作品集\\Vue_MySweetLover\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9IZWFkZXInCmltcG9ydCBGb290ZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9Gb290ZXInCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2N1c3RvbWVyQ2hlY2t1b3QnLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgaXNMb2FkaW5nOiBmYWxzZSwKICAgICAgb3JkZXI6IHsKICAgICAgICB1c2VyOiB7fQogICAgICB9LAogICAgICBvcmRlcklkOiAnJwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgSGVhZGVyLAogICAgRm9vdGVyCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRPcmRlciAoKSB7CiAgICAgIGNvbnN0IHZtID0gdGhpcwogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9L2FwaS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfQ1VTVE9NUEFUSH0vb3JkZXIvJHt2bS5vcmRlcklkfWAKICAgICAgdm0uaXNMb2FkaW5nID0gdHJ1ZQogICAgICB2bS4kaHR0cC5nZXQoYXBpKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgIHZtLm9yZGVyID0gcmVzcG9uc2UuZGF0YS5vcmRlcgogICAgICAgIHZtLmlzTG9hZGluZyA9IGZhbHNlCiAgICAgIH0pCiAgICB9LAogICAgcGF5T3JkZXIgKCkgewogICAgICBjb25zdCB2bSA9IHRoaXMKICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS9hcGkvJHtwcm9jZXNzLmVudi5WVUVfQVBQX0NVU1RPTVBBVEh9L3BheS8ke3ZtLm9yZGVySWR9YAogICAgICB2bS5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIHZtLiRodHRwLnBvc3QoYXBpKS50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQogICAgICAgICAgdm0uJHJvdXRlci5wdXNoKGAvcGF5bWVudF9zdWNjZXNzLyR7dm0ub3JkZXJJZH1gKQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygn57WQ5biz5aSx5pWXJykKICAgICAgICB9CiAgICAgICAgdm0uaXNMb2FkaW5nID0gZmFsc2UKICAgICAgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQgKCkgewogICAgdGhpcy5vcmRlcklkID0gdGhpcy4kcm91dGUucGFyYW1zLm9yZGVySWQKICAgIHRoaXMuZ2V0T3JkZXIoKQogIH0KfQo="},{"version":3,"sources":["CustomerCheckout.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomerCheckout.vue","sourceRoot":"src/views/frontEnd","sourcesContent":["<template>\n  <div>\n    <loading :active.sync=\"isLoading\">\n      <img src=\"../../assets/images/load.gif\" alt=\"loading\">\n    </loading>\n    <!-- Start Header -->\n    <Header/>\n    <!-- End Header -->\n\n    <!-- Start Content -->\n    <div class=\"container mt-4\">\n        <div class=\"row mb-5\">\n            <div class=\"col-md-10 offset-md-1\">\n                <div class=\"row\">\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step\">資料填寫</div>\n                    </div>\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step active\">確認訂單</div>\n                    </div>\n                    <div class=\"col-md-4 mb-2 mb-md-4\">\n                        <div class=\"step\">完成</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-md-6 offset-md-3\">\n                <form @submit.prevent=\"payOrder\">\n                  <table class=\"table mb-5\">\n                    <thead>\n                      <tr>\n                        <td class=\"text-left\">品名</td>\n                        <td width=\"20%\" class=\"text-center\">數量</td>\n                        <td width=\"30%\" class=\"text-center\">單價</td>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"item in order.products\" :key=\"item.id\">\n                        <td class=\"text-left\">{{ item.product.title }}</td>\n                        <td class=\"text-center\">{{ item.qty }}/{{ item.product.unit }}</td>\n                        <td class=\"text-right\">{{ item.final_total | currency }}</td>\n                      </tr>\n                      <tr>\n                        <td colspan=\"2\" class=\"text-right checkoutFinalTotal\">總計</td>\n                        <td class=\"text-right checkoutFinalTotal\">{{ order.total | currency }}</td>\n                      </tr>\n                    </tbody>\n                  </table>\n                  <table class=\"table mb-5\">\n                    <tr>\n                      <td colspan=\"2\" class=\"text-center border-0 memberTitle\">會員資料核對</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">Email</td>\n                      <td>{{ order.user.email }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">姓名</td>\n                      <td>{{ order.user.name }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">電話</td>\n                      <td>{{ order.user.tel }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">地址</td>\n                      <td>{{ order.user.address }}</td>\n                    </tr>\n                    <tr>\n                      <td width=\"20%\">付款狀態</td>\n                      <td>\n                        <span v-if=\"!order.is_paid\">尚未付款</span>\n                        <span v-else class=\"text-success\">付款完成</span>\n                      </td>\n                    </tr>\n                  </table>\n                  <div class=\"text-right\">\n                    <button type=\"submit\" class=\"btn btn-danger mb-4\" v-if=\"order.is_paid === false\">確認付款去</button>\n                  </div>\n                </form>\n            </div>\n        </div>\n    </div>\n    <!-- End Content -->\n\n    <!-- Start Footer -->\n    <Footer/>\n    <!-- End Footer -->\n  </div>\n</template>\n\n<script>\nimport Header from '../../components/Header'\nimport Footer from '../../components/Footer'\n\nexport default {\n  name: 'customerCheckuot',\n  data () {\n    return {\n      isLoading: false,\n      order: {\n        user: {}\n      },\n      orderId: ''\n    }\n  },\n  components: {\n    Header,\n    Footer\n  },\n  methods: {\n    getOrder () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/order/${vm.orderId}`\n      vm.isLoading = true\n      vm.$http.get(api).then((response) => {\n        console.log(response)\n        vm.order = response.data.order\n        vm.isLoading = false\n      })\n    },\n    payOrder () {\n      const vm = this\n      const api = `${process.env.VUE_APP_APIPATH}/api/${process.env.VUE_APP_CUSTOMPATH}/pay/${vm.orderId}`\n      vm.isLoading = true\n      vm.$http.post(api).then((response) => {\n        if (response.data.success) {\n          console.log(response)\n          vm.$router.push(`/payment_success/${vm.orderId}`)\n        } else {\n          console.log('結帳失敗')\n        }\n        vm.isLoading = false\n      })\n    }\n  },\n  created () {\n    this.orderId = this.$route.params.orderId\n    this.getOrder()\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../assets/all.scss\";\n\n.container {\n  padding-top: 9vh;\n}\n\n.step{\n    width: 100%;\n    padding: 10px 0;\n    font-size: 16px;\n    line-height: 20px;\n    text-align: center;\n    color: $primary;\n    border: 1px solid $primary;\n    border-radius: 20px;\n    &.active{\n        background-color: $primary;\n        color: white\n    }\n}\n#accordion{\n    width: 100%;\n    .btn-link,\n    .btn-link:hover{\n        text-decoration: none;\n    }\n    .totalPrice{\n        font-weight: bold;\n    }\n}\ntextarea{\n  resize: none;\n}\n.checkoutFinalTotal{\n  font-size: 24px;\n  line-height: 24px;\n  font-weight: bold;\n  color: $danger;\n}\n.memberTitle{\n  font-size: 26px;\n  line-height: 26px;\n  font-weight: bold;\n  color: $black;\n}\n</style>\n"]}]}